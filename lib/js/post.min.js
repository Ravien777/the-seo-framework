'use strict';window.tsfPost=function(a){const b="undefined"!=typeof tsfPostL10n&&tsfPostL10n,c="autodescription_title",d="autodescription_description",e="autodescription_og_title",f="autodescription_og_description",g="autodescription_twitter_title",h="autodescription_twitter_description",i=()=>{if(!document.querySelector(".tsf-flex"))return;let b={};const c=d=>{let e=d.querySelector(".tsf-flex-nav-tab-inner"),f=d.getElementsByClassName("tsf-flex-nav-name"),g=e.clientWidth<=d.clientWidth;if(g){if(+(d.dataset.displayedNames||1))return;d.dataset.displayedNames=1,a(f).stop(!1,!0).fadeIn(250)}else{if(!+(d.dataset.displayedNames||1))return;d.dataset.displayedNames=0,a(f).hide()}+d.dataset.displayedNames&&(e.clientWidth>d.clientWidth?(a(f).stop(!1,!0).hide(),d.dataset.displayedNames=0):setTimeout(()=>{cancelAnimationFrame(b[d.id]),b[d.id]=requestAnimationFrame(()=>c(d))},7))};window.addEventListener("tsf-flex-resize",a=>{let d=a.detail.target||document.getElementById("tsf-flex-inpost-tabs-wrapper");d&&(b[d.id]=requestAnimationFrame(()=>c(d)))});const d=a=>{window.dispatchEvent(new CustomEvent("tsf-flex-resize",{bubbles:!1,cancelable:!1,detail:{target:a}}))};let e={};const f=new ResizeObserver(a=>{for(const b of a){let a=b.target;cancelAnimationFrame(e[a.id]),e[a.id]=requestAnimationFrame(()=>{a.dataset.lastWidth||=0,+a.clientWidth!=+a.dataset.lastWidth&&(a.dataset.lastWidth=a.clientWidth,d(a))})}});f.observe(document.getElementById("tsf-flex-inpost-tabs-wrapper")),d()},j=()=>{tsfTabs.initStack("tsfSettings",{tabToggledEvent:new CustomEvent("tsf-flex-tab-toggled"),HTMLClasses:{wrapper:"tsf-flex-nav-tab-wrapper",tabRadio:"tsf-flex-nav-tab-radio",tabLabel:"tsf-flex-nav-tab-label",activeTab:"tsf-flex-tab-active",activeTabContent:"tsf-flex-tab-content-active"},fixHistory:!0})},k=()=>{const c=document.getElementById("autodescription_noindex");if(!c)return;const d=1,e=2;let f,g=0,h="";const i=()=>{clearTimeout(f),f=setTimeout(()=>{let a=document.getElementById("autodescription_canonical");a&&(h||=a.placeholder,a.placeholder=g&d||g&e?"":h)},50)},j=a=>{h=a,i()};a(document).on("tsf-updated-gutenberg-link",(a,b)=>j(b));const k=a=>{let b=c.querySelector("[value=\"0\"]"),e="";switch(a){case"password":case"private":e="noindex",g|=d;break;default:case"public":e=c.dataset.defaultUnprotected,g&=~d;}b&&(b.innerHTML=c.dataset.defaultI18n.replace("%s",tsf.decodeEntities(e))),i()};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>k(b));const l=document.querySelector("#visibility .save-post-visibility");l&&l.addEventListener("click",()=>{let b=a("#visibility").find("input:radio:checked").val();if("password"===b){let c=a("#visibility").find("#post_password").val();c&&c.length||(b="public")}k(b)}),b.states.isPrivate?k("private"):b.states.isProtected?k("password"):k("public");const m=a=>{let b="";switch(+a){case 0:b=c.dataset.defaultUnprotected;break;case-1:b="index";break;case 1:b="noindex";}"noindex"===b?g|=e:g&=~e,i()};c.addEventListener("change",a=>m(a.target.value)),m(c.value)},l=()=>{const d=document.getElementById(c);if(!d)return;const e=document.getElementById("autodescription_title_no_blogname");tsfTitle.setInputElement(d);let f=JSON.parse(document.getElementById(`tsf-title-data_${c}`).dataset.state);tsfTitle.updateStateOf(c,"allowReferenceChange",!f.refTitleLocked),tsfTitle.updateStateOf(c,"defaultTitle",f.defaultTitle.trim()),tsfTitle.updateStateOf(c,"addAdditions",f.addAdditions),tsfTitle.updateStateOf(c,"useSocialTagline",!!(f.useSocialTagline||!1)),tsfTitle.updateStateOf(c,"additionValue",f.additionValue.trim()),tsfTitle.updateStateOf(c,"additionPlacement",f.additionPlacement),tsfTitle.updateStateOf(c,"hasLegacy",!!(f.hasLegacy||!1));e&&(e.addEventListener("change",a=>{let d=tsfTitle.getStateOf(c,"addAdditions"),e=!a.target.checked;b.params.additionsForcedDisabled?e=!1:b.params.additionsForcedEnabled&&(e=!0),d!==e&&tsfTitle.updateStateOf(c,"addAdditions",e)}),e.dispatchEvent(new Event("change")));const g=a=>{let b=tsfTitle.getStateOf(c,"prefixValue"),d="";switch(a){case"password":d=tsfTitle.protectedPrefix;break;case"private":d=tsfTitle.privatePrefix;break;default:case"public":d="";}d!==b&&tsfTitle.updateStateOf(c,"prefixValue",d)};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>g(b));const h=document.querySelector("#visibility .save-post-visibility");h&&h.addEventListener("click",()=>{let b=a("#visibility").find("input:radio:checked").val();if("password"===b){let c=a("#visibility").find("#post_password").val();c&&c.length||(b="public")}g(b)}),b.states.isPrivate?g("private"):b.states.isProtected&&g("password");const i=a=>{a="string"==typeof a&&a.trim()||"";let b=tsfTitle.stripTitleTags?tsf.stripTags(a):a;tsfTitle.updateStateOf(c,"defaultTitle",b||tsfTitle.untitledTitle)};if(!b.params.isFront){const b=document.querySelector("#titlewrap #title");b&&b.addEventListener("input",a=>i(a.target.value)),a(document).on("tsf-updated-gutenberg-title",(a,b)=>i(b))}tsfTitle.enqueueUnregisteredInputTrigger(c)},m=()=>{let c=document.getElementById(d);if(!c)return;let e=JSON.parse(document.getElementById(`tsf-description-data_${d}`).dataset.state);tsfDescription.setInputElement(c),tsfDescription.updateStateOf(d,"allowReferenceChange",!e.refDescriptionLocked),tsfDescription.updateStateOf(d,"defaultDescription",e.defaultDescription.trim()),tsfDescription.updateStateOf(d,"hasLegacy",!!(e.hasLegacy||!1)),tsfDescription.enqueueUnregisteredInputTrigger(d);const f=a=>{let b=tsfDescription.getStateOf(d,"useDefaultDescription"),c=!0;switch(a){case"password":case"private":c=!1;break;default:case"public":c=!0;}c!==b&&tsfDescription.updateStateOf(d,"useDefaultDescription",c)};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>f(b));const g=document.querySelector("#visibility .save-post-visibility");g&&g.addEventListener("click",()=>{let b=a("#visibility").find("input:radio:checked").val();if("password"===b){let c=a("#visibility").find("#post_password").val();c&&c.length||(b="public")}f(b)}),b.states.isPrivate?f("private"):b.states.isProtected&&f("password")},n=()=>{let a=JSON.parse(document.getElementById(`tsf-og-title-data_${e}`).dataset.state),b=JSON.parse(document.getElementById(`tsf-tw-title-data_${g}`).dataset.state),i=JSON.parse(document.getElementById(`tsf-og-description-data_${f}`).dataset.state),j=JSON.parse(document.getElementById(`tsf-tw-description-data_${h}`).dataset.state);tsfSocial.updateState("useTagline",a.addAdditions),tsfSocial.updateState("ogTitleDefault",a.defaultTitle),tsfSocial.updateState("twTitleDefault",b.defaultTitle),tsfSocial.updateState("ogDescDefault",i.defaultDesc),tsfSocial.updateState("twDescDefault",j.defaultDesc),tsfSocial.initTitleInputs({ref:document.getElementById(`tsf-title-reference_${c}`),refNa:document.getElementById(`tsf-title-noadditions-reference_${c}`),meta:document.getElementById(c),og:document.getElementById(e),ogRef:document.getElementById(`tsf-og-title-reference_${e}`),tw:document.getElementById(g),twRef:document.getElementById(`tsf-tw-title-reference_${g}`)}),tsfSocial.initDescriptionInputs({ref:document.getElementById(`tsf-description-reference_${d}`),meta:document.getElementById(d),og:document.getElementById(f),ogRef:document.getElementById(`tsf-og-description-reference_${f}`),tw:document.getElementById(h),twRef:document.getElementById(`tsf-tw-description-reference_${h}`)})},o=()=>{const b=()=>{tsfTitle.enqueueUnregisteredInputTrigger(c),tsfDescription.enqueueUnregisteredInputTrigger(d)};a("#tsf-flex-inpost-tab-general").on("tsf-flex-tab-toggled",b),window.addEventListener("tsf-flex-resize",b)},p=()=>{b.states.isGutenbergPage&&("tsfTT"in window&&tsfTT.addBoundary("#editor"),document.addEventListener("tsf-gutenberg-sidebar-opened",()=>{"tsfTT"in window&&tsfTT.addBoundary(".edit-post-sidebar .components-panel")}))},q=()=>{if(!b.states.isGutenbergPage)return;const c=document.querySelector(".tsf-seo-bar"),e=document.querySelector("#tsf-doing-it-right-wrap .tsf-ajax"),g=document.getElementById("autodescription_socialimage-url"),i={seobar:!!c,metadescription:!!document.getElementById(d),ogdescription:!!document.getElementById(f),twdescription:!!document.getElementById(h),imageurl:!!g},j=b=>{switch(b=tsf.convertJSONResponse(b),b.type){case"success":const f=75;setTimeout(()=>{"tsfDescription"in window&&tsfDescription.updateStateOf(d,"defaultDescription",b.data.metadescription.trim()),"tsfSocial"in window&&(tsfSocial.updateState("ogDescDefault",b.data.ogdescription.trim()),tsfSocial.updateState("twDescDefault",b.data.twdescription.trim())),g&&(g.placeholder=tsf.decodeEntities(b.data.imageurl),g.dispatchEvent(new Event("change"))),"tsfAys"in window&&tsfAys.reset()},f),a(c).fadeOut(f,()=>{e&&tsf.unsetAjaxLoader(e,!0)}).html(b.data.seobar).fadeIn(500,()=>{"tsfTT"in window&&tsfTT.triggerReset()});break;case"failure":e&&tsf.unsetAjaxLoader(e,!1);break;default:e&&tsf.resetAjaxLoader(e);}},k=()=>{e&&tsf.unsetAjaxLoader(e,!1)};document.addEventListener("tsf-gutenberg-onsave",()=>{e&&tsf.resetAjaxLoader(e),e&&tsf.setAjaxLoader(e);let c={method:"POST",url:ajaxurl,datatype:"json",data:{action:"tsf_update_post_data",nonce:tsf.l10n.nonces.edit_posts,post_id:b.states.id,get:i},async:!0,timeout:7e3,success:j,error:k};a.ajax(c)})},r=()=>{k(),l(),m(),n(),o()},s=()=>{i(),j(),p(),q()};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",r),document.body.addEventListener("tsf-ready",s)}},{},{l10n:b})}(jQuery),window.tsfPost.load();
