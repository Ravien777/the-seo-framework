'use strict';window.tsfDescription=function(a){const b="undefined"!=typeof tsfDescriptionL10n&&tsfDescriptionL10n,c=new Map;let d={};const e=a=>c.get(a),f=(a,b)=>{var c;return b?null===(c=d[a])||void 0===c?void 0:c[b]:d[a]},g=(a,b,c)=>{switch(d[a][b]=c,b){case"allowReferenceChange":case"defaultDescription":case"useDefaultDescription":default:r(a);}},h=a=>{let b=[document.getElementById("tsf-description-reference_"+a)];if(f(a,"hasLegacy")){let a=document.getElementById("tsf-description-reference");a&&b.unshift(a)}return b},i=a=>{let b=h(a.target.id);if(!b[0])return;let c=f(a.target.id,"allowReferenceChange"),d=!c||f(a.target.id,"useDefaultDescription"),e=c&&a.target.value.trim()||d&&f(a.target.id,"defaultDescription")||"",g=tsf.escapeString(tsf.decodeEntities(tsf.sDoubleSpace(e.trim())));b.forEach(a=>{a.innerHTML=g,setTimeout(()=>{a.dispatchEvent(new Event("change"))},0)})},j=a=>{a.target.placeholder=h(a.target.id)[0].innerText},k=a=>{if("tsfC"in window){let b=document.getElementById(a.target.id+"_chars"),c=h(a.target.id)[0];b&&tsfC.updateCharacterCounter({e:b,text:c.innerHTML,field:"description",type:"search"})}},l=a=>{if("tsfC"in window){let b=document.getElementById(`${a.target.id}_pixels`),c=h(a.target.id)[0];b&&tsfC.updatePixelCounter({e:b,text:c.innerHTML,field:"description",type:"search"})}},m=a=>{if(a){let b=e(a);b&&b.dispatchEvent(new Event("input"))}else c.forEach(a=>a.id&&m(a.id))},n=a=>{if(a){let b=e(a);b&&b.dispatchEvent(new CustomEvent("tsf-update-description-counter"))}else c.forEach(a=>a.id&&n(a.id))},o=a=>{i(a),j(a),p(a)},p=a=>{k(a),l(a)};let q={};const r=a=>{a in q&&clearTimeout(q[a]),q[a]=setTimeout(()=>m(a),1e3/60)},s=a=>{if("tsfAys"in window){let b=tsfAys.areSettingsChanged();m(a),!b&&tsfAys.areSettingsChanged()&&tsfAys.reset()}else m(a)};let t={};const u=a=>{a in t&&clearTimeout(t[a]),t[a]=setTimeout(()=>s(a),1e3/60)};let v=window.innerWidth;const w=()=>{let a=window.innerWidth;v<a?782>=v&&782<=a&&s():782<=v&&782>=a&&s(),v=a},x=()=>{a(document).on("wp-window-resized",w),window.addEventListener("tsf-counter-updated",()=>u())},y=a=>{!a instanceof Element||(a.addEventListener("input",o),a.addEventListener("tsf-update-description-counter",p),u(a.id))};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",x)}},{setInputElement:a=>(c.set(a.id,a),d[a.id]={allowReferenceChange:!0,defaultDescription:"",useDefaultDescription:!0},y(a),e(a.id)),getInputElement:e,getStateOf:f,updateStateOf:g,updateStateAll:(a,b)=>{c.forEach(c=>{g(c.id,a,b)})},triggerCounter:n,triggerInput:m,enqueueTriggerInput:r,triggerUnregisteredInput:s,enqueueUnregisteredInputTrigger:u},{l10n:b})}(jQuery),window.tsfDescription.load();
