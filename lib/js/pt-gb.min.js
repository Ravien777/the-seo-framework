'use strict';window.tsfPTGB=function(a){const b="undefined"!=typeof tsfPTL10n&&tsfPTL10n,c=null===b||void 0===b?void 0:b.taxonomies,{createElement:d,Fragment:e,Component:f,useState:g,useEffect:h}=wp.element,{SelectControl:i}=wp.components,{useSelect:j}=wp.data,{unescape:k}=lodash,l=[],m={per_page:-1,orderby:"id",order:"asc",_fields:"id,name"},n=(a,b)=>c[a].i18n[b]||"";let o={};const p=b=>{const d=()=>document.getElementById(`autodescription[_primary_term_${b}]`),e=()=>+d().value,f=a=>+(d().value=+a);return{get:e,set:f,revalidate:a=>{let b=e();return a.includes(b)?b:f((null===a||void 0===a?void 0:a[0])||0)},register:()=>{let d=document.getElementById("tsf-gutenberg-data-holder");if(!d)return o[b]=!1;let e=wp.template("tsf-primary-term-selector")({taxonomy:c[b]});return o[b]=!!a(e).appendTo(d)},isRegistered:()=>o[b]||!1}},q=()=>{function a({taxonomySlug:a}){const b=p(a),[c,e]=g(b.get()),{selectedTerms:f,loading:o,availableTerms:q}=j(b=>{const{getTaxonomy:c,getEntityRecords:d,isResolving:e}=b("core"),{getEditedPostAttribute:f}=b("core/editor"),g=c(a),h=["taxonomy",a,m];return{selectedTerms:f(null===g||void 0===g?void 0:g.rest_base)||l,loading:e("getEntityRecords",h),availableTerms:d(...h)||l}},[a]);if(h(()=>{f.includes(+c)&&b.get()===+c||(b.revalidate(f),e(b.get()))}),2>(null===f||void 0===f?void 0:f.length))return b.set(0),null;const r=a=>{f.includes(+a)&&(b.set(a),e(b.get()),"tsfAys"in window&&tsfAys.registerChange())};return d(i,{label:n(a,"selectPrimary"),value:c,className:"tsf-pt-gb-selector",onChange:r,options:(()=>q.map(a=>f.includes(null===a||void 0===a?void 0:a.id)&&{value:a.id,label:k(null===a||void 0===a?void 0:a.name)}).filter(Boolean)||"")(),disabled:(()=>!(f.length&&q.length&&!o))()})}if(Object.keys(c).length){for(let a in c)p(a).register();wp.hooks.addFilter("editor.PostTaxonomyType","tsf/pt",b=>class extends f{render(){var c,f;return p(null===(c=this.props)||void 0===c?void 0:c.slug).isRegistered()?d(e,null,d(b,{...this.props}),d(a,{taxonomySlug:null===(f=this.props)||void 0===f?void 0:f.slug})):d(b,{...this.props})}})}};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",q)}},{},{l10n:b})}(jQuery),window.tsfPTGB.load();
