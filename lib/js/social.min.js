'use strict';window.tsfSocial=function(){const a="undefined"!=typeof tsfSocialL10n&&tsfSocialL10n,b=new Map,c={},d=(a,b)=>{switch(b){case"addAdditions":let c=g(a).refs.title.dataset?.for;c&&tsfTitle.enqueueUnregisteredInputTrigger(c);break;default:}},e=(a,b)=>b?c[a]?.[b]:c[a],f=(a,b,e)=>{c[a][b]===e||(c[a][b]=e,d(a,b))},g=a=>b.get(a),h=a=>{function*b(a){const b=f("inputLocks"),e=f("placeholderLocks");switch(a){case"twitter":if(yield b.twTitle?f("defaults").twTitle:c.twTitle.value.trim(),b.twTitle||e.twTitle){yield f("defaults").twTitle;break}case"og":if(yield b.ogTitle?f("defaults").ogTitle:c.ogTitle.value.trim(),b.ogTitle||e.ogTitle){yield f("defaults").ogTitle;break}case"meta":case"ref":f("addAdditions")?yield d.title.innerHTML:yield d.titleNa.innerHTML;}}const{inputs:c,refs:d}=g(a),f=b=>e(a,b),h=a=>{const c=b(a);let d="";for(;"undefined"!=typeof d&&!d.length;)d=c.next().value,d?.length&&(d=tsf.sDoubleSpace(tsf.sTabs(tsf.sSingleLine(d))));return d?.length?d:""},i=()=>{const a=f("inputLocks"),b=f("placeholderLocks");c.ogTitle.placeholder=a.ogTitle||b.ogTitle?tsf.decodeEntities(f("defaults").ogTitle):tsf.decodeEntities(h("meta")),c.twTitle.placeholder=a.twTitle||b.twTitle?tsf.decodeEntities(f("defaults").twTitle):tsf.decodeEntities(h("og"))},j=(a,b,c)=>{let d=document.getElementById(`${a.id}_chars`);d&&tsfC.updateCharacterCounter({e:d,text:b,field:"title",type:c})},k=()=>{j(c.ogTitle,h("og"),"opengraph"),j(c.twTitle,h("twitter"),"twitter")};let l;const m=()=>{clearTimeout(l),l=setTimeout(()=>{i(),k()},1e3/60)};d.title.addEventListener("change",m),d.titleNa.addEventListener("change",m);let n;const o=()=>{clearTimeout(n),n=setTimeout(()=>{i(),k()},1e3/60)};c.ogTitle.addEventListener("input",o),c.twTitle.addEventListener("input",o)},i=a=>{function*b(a,b){const e=f("inputLocks"),g=f("placeholderLocks");switch(a){case"twitter":if(yield e.twDesc?f("defaults").twDesc:c.twDesc.value.trim(),e.twDesc||g.twDesc){yield f("defaults").twDesc;break}case"og":if(yield e.ogDesc?f("defaults").ogDesc:c.ogDesc.value.trim(),e.ogDesc||g.ogDesc){yield f("defaults").ogDesc;break}case"meta":d.descInput?.value.length||("twitter"===b?yield f("defaults").twDesc:"og"==b&&(yield f("defaults").ogDesc));case"ref":yield d.desc.innerHTML;}}const{inputs:c,refs:d}=g(a),f=b=>e(a,b),h=(a,c)=>{const d=b(a,c);let e="";for(;"undefined"!=typeof e&&!e.length;)e=d.next().value,e?.length&&(e=tsf.sDoubleSpace(tsf.sTabs(tsf.sSingleLine(e))));return e?.length?e:""},i=()=>{const a=f("inputLocks"),b=f("placeholderLocks");c.ogDesc.placeholder=a.ogDesc||b.ogDesc?tsf.decodeEntities(f("defaults").ogDesc):tsf.decodeEntities(h("meta","og")),c.twDesc.placeholder=a.twDesc||b.twDesc?tsf.decodeEntities(f("defaults").twDesc):tsf.decodeEntities(h("og","twitter"))},j=(a,b,c)=>{let d=document.getElementById(`${a.id}_chars`);d&&tsfC.updateCharacterCounter({e:d,text:b,field:"description",type:c})},k=()=>{j(c.ogDesc,h("og","og"),"opengraph"),j(c.twDesc,h("twitter","twitter"),"twitter")};let l;const m=()=>{clearTimeout(l),l=setTimeout(()=>{i(),k()},1e3/60)};d.desc.addEventListener("change",m);let n;const o=()=>{clearTimeout(n),n=setTimeout(()=>{i(),k()},1e3/60)};c.ogDesc.addEventListener("input",o),c.twDesc.addEventListener("input",o)};return Object.assign({load:()=>{}},{getStateOf:e,updateStateOf:f,updateStateAll:(a,c,d)=>{d=Array.isArray(d)?d:[d],b.forEach(({group:b,inputs:e,refs:g})=>{d.includes(b)||f(b,a,c)})},setInputInstance:(a,d,e)=>{const f=b=>document.querySelector(`[data-tsf-social-group="${a}"][data-tsf-social-type="${b}"]`),j={ogTitle:f("ogTitle"),twTitle:f("twTitle"),ogDesc:f("ogDesc"),twDesc:f("twDesc")},k={titleInput:document.getElementById(d),descInput:document.getElementById(e),title:document.getElementById(`tsf-title-reference_${d}`),titleNa:document.getElementById(`tsf-title-noadditions-reference_${d}`),desc:document.getElementById(`tsf-description-reference_${e}`)};return b.set(a,{group:a,inputs:j,refs:k}),c[a]={defaults:{ogTitle:"",twTitle:"",ogDesc:"",twDesc:""},inputLocks:{ogTitle:!1,twTitle:!1,ogDesc:!1,twDesc:!1},placeholderLocks:{ogTitle:!1,twTitle:!1,ogDesc:!1,twDesc:!1}},h(a),i(a),g(a)},getInputInstance:g},{l10n:a})}(),window.tsfSocial.load();
