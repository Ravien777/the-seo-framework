'use strict';window.tsfSocial=function(){const a="undefined"!=typeof tsfSocialL10n&&tsfSocialL10n,b=new Map;let c={};const d=(a,b)=>b?c[a]?.[b]:c[a],e=(a,b)=>{switch(b){case"addAdditions":let c=h(a).refs.title.dataset?.for;c&&tsfTitle.enqueueUnregisteredInputTrigger(c);break;default:}},f=(a,b,d)=>{c[a][b]=d,e(a,b)},g=(a,b,d,f)=>{c[a][b][d]=f,e(a,b)},h=a=>b.get(a),i=a=>{function*b(a){const b=f("inputLocks"),d=f("placeholderLocks");switch(a){case"twitter":if(yield b.twTitle?f("defaults").twTitle:c.twTitle.value.trim(),b.twTitle||d.twTitle){yield f("defaults").twTitle;break}case"og":if(yield b.ogTitle?f("defaults").ogTitle:c.ogTitle.value.trim(),b.ogTitle||d.ogTitle){yield f("defaults").ogTitle;break}case"meta":case"ref":f("addAdditions")?yield e.title.innerHTML:yield e.titleNa.innerHTML;}}const{inputs:c,refs:e}=h(a),f=b=>d(a,b),g=a=>{const c=b(a);let d="";for(;"undefined"!=typeof d&&!d.length;)d=c.next().value,d?.length&&(d=tsf.sDoubleSpace(tsf.sTabs(tsf.sSingleLine(d))));return d?.length?d:""},i=()=>{const a=f("inputLocks"),b=f("placeholderLocks");c.ogTitle.placeholder=a.ogTitle||b.ogTitle?tsf.decodeEntities(f("defaults").ogTitle):tsf.decodeEntities(g("meta")),c.twTitle.placeholder=a.twTitle||b.twTitle?tsf.decodeEntities(f("defaults").twTitle):tsf.decodeEntities(g("og"))},j=(a,b,c)=>{let d=document.getElementById(`${a.id}_chars`);d&&tsfC.updateCharacterCounter({e:d,text:b,field:"title",type:c})},k=()=>{j(c.ogTitle,g("og"),"opengraph"),j(c.twTitle,g("twitter"),"twitter")};let l;const m=()=>{clearTimeout(l),l=setTimeout(()=>{i(),k()},1e3/60)};e.title.addEventListener("change",m),e.titleNa.addEventListener("change",m);let n;const o=()=>{clearTimeout(n),n=setTimeout(()=>{i(),k()},1e3/60)};c.ogTitle.addEventListener("input",o),c.twTitle.addEventListener("input",o)},j=a=>{function*b(a,b){const d=f("inputLocks"),g=f("placeholderLocks");switch(a){case"twitter":if(yield d.twDesc?f("defaults").twDesc:c.twDesc.value.trim(),d.twDesc||g.twDesc){yield f("defaults").twDesc;break}case"og":if(yield d.ogDesc?f("defaults").ogDesc:c.ogDesc.value.trim(),d.ogDesc||g.ogDesc){yield f("defaults").ogDesc;break}case"meta":"twitter"===b?yield e.desc.innerHTML||f("defaults").twDesc:"og"==b&&(yield e.desc.innerHTML||f("defaults").ogDesc);case"ref":yield e.desc.innerHTML;}}const{inputs:c,refs:e}=h(a),f=b=>d(a,b),g=(a,c)=>{const d=b(a,c);let e="";for(;"undefined"!=typeof e&&!e.length;)e=d.next().value,e?.length&&(e=tsf.sDoubleSpace(tsf.sTabs(tsf.sSingleLine(e))));return e?.length?e:""},i=()=>{const a=f("inputLocks"),b=f("placeholderLocks");c.ogDesc.placeholder=a.ogDesc||b.ogDesc?tsf.decodeEntities(f("defaults").ogDesc):tsf.decodeEntities(g("meta","og")),c.twDesc.placeholder=a.twDesc||b.twDesc?tsf.decodeEntities(f("defaults").twDesc):tsf.decodeEntities(g("og","twitter"))},j=(a,b,c)=>{let d=document.getElementById(`${a.id}_chars`);d&&tsfC.updateCharacterCounter({e:d,text:b,field:"description",type:c})},k=()=>{j(c.ogDesc,g("og","og"),"opengraph"),j(c.twDesc,g("twitter","twitter"),"twitter")};let l;const m=()=>{clearTimeout(l),l=setTimeout(()=>{i(),k()},1e3/60)};e.desc.addEventListener("change",m);let n;const o=()=>{clearTimeout(n),n=setTimeout(()=>{i(),k()},1e3/60)};c.ogDesc.addEventListener("input",o),c.twDesc.addEventListener("input",o)};return Object.assign({load:()=>{}},{setInputInstance:(a,d,e)=>{const f=b=>document.querySelector(`[data-tsf-social-group="${a}"][data-tsf-social-type="${b}"]`),g={ogTitle:f("ogTitle"),twTitle:f("twTitle"),ogDesc:f("ogDesc"),twDesc:f("twDesc")},k={title:document.getElementById(`tsf-title-reference_${d}`),titleNa:document.getElementById(`tsf-title-noadditions-reference_${d}`),desc:document.getElementById(`tsf-description-reference_${e}`)};return b.set(a,{group:a,inputs:g,refs:k}),c[a]={defaults:{ogTitle:"",twTitle:"",ogDesc:"",twDesc:""},inputLocks:{ogTitle:!1,twTitle:!1,ogDesc:!1,twDesc:!1},placeholderLocks:{ogTitle:!1,twTitle:!1,ogDesc:!1,twDesc:!1}},i(a),j(a),h(a)},getInputInstance:h,updateStateOf:f,updateSubStateOf:g,updateStateAll:(a,c)=>{b.forEach(({group:b,inputs:d,refs:e})=>{f(b,a,c)})},updateSubStateAll:(a,c,d)=>{b.forEach(({group:b,inputs:e,refs:f})=>{g(b,a,c,d)})}},{l10n:a})}(),window.tsfSocial.load();
