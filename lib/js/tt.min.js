'use strict';window.tsfTT=function(a){const b="tsf-tooltip",c=`.${b}`,d="tsf-tooltip-item",e=`.${"tsf-tooltip-wrap"}`,f="tsf-tooltip-text",g=`.${f}`,h="tsf-tooltip-text-wrap",i=`.${h}`,j="tsf-tooltip-boundary",k=`tsf-tooltip-arrow`,l={updateDesc:a=>{if(a.target.classList.contains(d)){let b=a.target.querySelector(g);b instanceof Element&&(b.innerHTML=a.target.dataset.desc,a.target.dispatchEvent(new Event("mousemove")))}},pointerEnter:async a=>{let c=a.target.dataset.desc||a.target.title||"";return!(!c||a.target.getElementsByClassName(b).length)&&(a.target.dataset.desc=c,a.target.removeAttribute("title"),w(a,a.target,c))},pointerMove:a=>{o.currPos.x=a.pageX||NaN,o.lastMoveEvent=a},pointerLeave:a=>{y(a.target),m(a.target).unset(),p.cancelMouseMoveAnimation()}},m=a=>{const b={mousemove:l.pointerMove,mouseleave:l.pointerLeave,mouseout:l.pointerLeave,blur:l.pointerLeave};return{set:()=>{for(const[c,d]of Object.entries(b))a.addEventListener(c,d);a.addEventListener("tsf-tooltip-update",l.updateDesc)},unset:()=>{for(const[c,d]of Object.entries(b))a.removeEventListener(c,d)}}},n={tooltip:void 0,arrow:void 0,wrap:void 0,reset:()=>{n.tooltip=n.arrow=n.wrap=void 0}},o={lastPos:{x:void 0},currPos:{x:void 0},lastMoveEvent:void 0,reset:()=>{o.lastMoveEvent=void 0,o.currPos={x:void 0},o.lastPos={x:void 0}}},p={_pointerAnimationId:void 0,requestMouseMoveAnimation:()=>{p._pointerAnimationId=requestAnimationFrame(q)},cancelMouseMoveAnimation:()=>{o.lastMoveEvent=void 0,n.reset(),o.reset(),cancelAnimationFrame(p._pointerAnimationId)}},q=()=>{var a=Math.round;let b=![o.currPos.x].includes(NaN);if(b&&o.currPos.x===o.lastPos.x)return void p.requestMouseMoveAnimation();o.lastPos.x=o.currPos.x;const d=o.lastMoveEvent;let f=n.tooltip||d&&d.target.querySelector(c);if(!f)return void p.requestMouseMoveAnimation();n.tooltip||=f,n.arrow||=f.querySelector(`.${k}`),n.wrap||=d.target.closest(e)||d.target.parentNode;let h=o.currPos.x,j=7,l=16;"focus"===d.type?h=d.target.getBoundingClientRect().left+d.target.offsetWidth/2:isNaN(h)&&(h=n.tooltip.dataset.lastPagex||d.target.getBoundingClientRect().left),n.tooltip.dataset.lastPagex=h;let m=h-n.wrap.getBoundingClientRect().left-l/2,q=n.tooltip.querySelector(i),r=q.offsetWidth,s=n.tooltip.dataset.adjust,t=r-l-j;if(s=parseInt(s,10),s=isNaN(s)?0:a(s),s&&(m-=s,t+s>n.wrap.offsetWidth)){let a=q.querySelector(g),b=a.offsetWidth;t=b-l-j}n.arrow.style.left=m<=j?`${j}px`:m>=t?`${t}px`:`${m}px`,b?p.requestMouseMoveAnimation():p._pointerAnimationId&&p.cancelMouseMoveAnimation()},r=a=>{if(a instanceof Element){if(a.dataset.preventedClick=1,a instanceof HTMLLabelElement&&a.htmlFor){let b=document.getElementById(a.htmlFor);b&&(b.dataset.preventedClick=1)}a instanceof HTMLInputElement&&a.id&&document.querySelectorAll(`label[for="${a.id}"]`).forEach(a=>{a.dataset.preventedClick=1})}},s=a=>{if(a instanceof Element){if(delete a.dataset.preventedClick,a instanceof HTMLLabelElement&&a.htmlFor){let b=document.getElementById(a.htmlFor);b&&delete b.dataset.preventedClick}a instanceof HTMLInputElement&&a.id&&document.querySelectorAll(`label[for="${a.id}"]`).forEach(a=>{delete a.dataset.preventedClick})}},t=a=>a instanceof Element&&+a.dataset.preventedClick,u=async a=>{if(a.target.dataset.hasTooltip)return;let b=!1;switch(a.type){case"mouseenter":break;case"pointerdown":case"touchstart":b=!0;break;case"focus":default:}b||r(a.target),p.cancelMouseMoveAnimation();(await l.pointerEnter(a))&&(l.pointerMove(a),p.requestMouseMoveAnimation(),m(a.target).set())},v=()=>{let a=!1,b=!1;try{(()=>{const c={get passive(){return a=!0,!1},get capture(){return b=!0,!1}};window.addEventListener("tsf-tt-test-passive",null,c),window.removeEventListener("tsf-tt-test-passive",null,c)})()}catch(c){a=!1,b=!1}const c=a=>{t(a.target)||(a.preventDefault(),setTimeout(()=>r(a.target)))};let f=!1;const g=a=>{f||(f=!0,a.target.classList.contains(d)&&u(a),a.stopPropagation(),f=!1)};let h;const j=!(a&&b)||{capture:!0,passive:!0},k=()=>{clearTimeout(h),h=setTimeout(()=>{let a=document.querySelectorAll(e),d="mouseenter pointerdown touchstart focus".split(" ");for(let f=0;f<a.length;f++)d.forEach(b=>{a[f].addEventListener(b,g,j)}),a[f].addEventListener("click",c,!!b&&{capture:!1})},25)};k(),window.addEventListener("tsf-tooltip-reset",k),x("#wpwrap")},w=async(d,g,l)=>{var n=Math.min;g instanceof a&&(g=g.get(0));for(const a of document.querySelectorAll(c))y(a),m(a).unset();if(!l.length)return!1;g.dataset.hasTooltip=1;let o=document.createElement("div");o.classList.add(b),o.insertAdjacentHTML("afterbegin",`<span class=${h}><span class=${f}>${l}</span></span><div class=${k} style=will-change:left></div>`),g.prepend(o);let p=g.closest(`.${j}`)||document.body,q=p.getBoundingClientRect(),r=q.top-(p.scrollTop||0),s=p.offsetWidth,t=250,u=12,v=g.closest(e)||g.parentElement,w=v.getBoundingClientRect(),x=o.querySelector(i),z=x.getBoundingClientRect(),A=w.width;z.width>t&&A<t&&150<A&&(x.style.flexBasis=`${A}px`),x.offsetWidth>s-u/2?(x.style.flexBasis=`${n(t,s-u)}px`,u/=2):z.width>t&&(x.style.flexBasis=`${t}px`);let B=q.left-(p.scrollLeft||0),C=B+s,D=x.offsetWidth,E=z.left,F=E+D,G=0;if(E<B)G=B-E+u;else if(F>C)G=C-E-D-u;else if(42>A)G=-A/2-u;else if(A>D){let a=d&&d.pageX||NaN;G=d&&"focus"===d.type?A/2-D/2:isNaN(a)?-u:a-w.left-D/2;let b=-u,c=A-D+u;G<b&&(G=b),G>c&&(G=c)}if(G+E<B+u){let a=G+E-(B+u/2);G-=a}if(G+F>C+u){let a=G+F-(C+u/2);G-=a}if(G+E<B&&(G=0),!d){let a=parseInt(x.style.flexBasis,10);G<-a&&(G=-a)}o.style.left=`${G}px`,o.dataset.adjust=G;let H=g.offsetHeight+8,I=o.getBoundingClientRect().top-H;return r>I?(o.classList.add("tsf-tooltip-down"),o.style.top=`${H}px`):o.style.bottom=`${H}px`,!0},x=a=>a instanceof Element&&a.classList.add(j),y=b=>{b instanceof a&&(b=b.get(0)),b instanceof HTMLElement&&(delete b.dataset.hasTooltip,s(b));const c=z(b);null===c||void 0===c?void 0:c.parentNode.removeChild(c)},z=d=>{var e,f;return d instanceof a&&(d=d.get(0)),null!==(e=d)&&void 0!==e&&e.classList.contains(b)?d:null===(f=d)||void 0===f?void 0:f.querySelector(c)};return Object.assign({load:()=>{document.body.addEventListener("tsf-ready",v)}},{doTooltip:w,removeTooltip:y,getTooltip:z,addBoundary:x,triggerReset:()=>{window.dispatchEvent(new CustomEvent("tsf-tooltip-reset"))},triggerUpdate:a=>{if(a&&a instanceof Element||(a=document.querySelectorAll(`.${d}`)),!a)return;const b=new CustomEvent("tsf-tooltip-update");a instanceof Element?a.dispatchEvent(b):a instanceof Nodelist&&a.forEach(a=>a.dispatchEvent(b))}})}(jQuery),window.tsfTT.load();
