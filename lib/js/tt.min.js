'use strict';window.tsfTT=function(a){const b="tsf-tooltip",c={base:b,item:`${b}-item`,wrap:`${b}-wrap`,text:`${b}-text`,textWrap:`${b}-text-wrap`,boundary:`${b}-boundary`,arrow:`${b}-arrow`},d=Object.fromEntries(Object.entries(c).map(([a,b])=>[a,`.${b}`])),e={updateDesc:a=>{if(a.target.classList.contains(c.item)){let b=a.target.querySelector(d.text);b instanceof Element&&(b.innerHTML=a.target.dataset.desc,a.target.dispatchEvent(new Event("mousemove")))}},pointerEnter:async a=>{let b=a.target.dataset.desc||a.target.title||"";return!(!b||a.target.getElementsByClassName(c.base).length)&&(a.target.dataset.desc=b,a.target.removeAttribute("title"),await o(a,a.target,b))},pointerMove:a=>{h.currPos.x=a.pageX||NaN,h.lastMoveEvent=a},pointerLeave:a=>{var b,d;q(a.target),f(a.target).unset(),null!==(b=a.relatedTarget)&&void 0!==b&&null!==(d=b.classList)&&void 0!==d&&d.contains(c.item)||j()}},f=a=>{const b={mousemove:e.pointerMove,mouseleave:e.pointerLeave,mouseout:e.pointerLeave,blur:e.pointerLeave};return{set:()=>{for(const[c,d]of Object.entries(b))a.addEventListener(c,d);a.addEventListener("tsf-tooltip-update",e.updateDesc)},unset:()=>{for(const[c,d]of Object.entries(b))a.removeEventListener(c,d)}}},g={tooltip:void 0,arrow:void 0,wrap:void 0,reset:()=>{g.tooltip=g.arrow=g.wrap=void 0}},h={lastPos:{x:void 0},currPos:{x:void 0},lastMoveEvent:void 0,reset:()=>{h.lastMoveEvent=void 0,h.currPos={x:void 0},h.lastPos={x:void 0}}},{_requestArrowAnimation:i,_cancelArrowAnimation:j,_requestArrowAnimationOnce:k}=(()=>{let a;const b=()=>{a=requestAnimationFrame(e)},c=()=>{cancelAnimationFrame(a),h.lastMoveEvent=void 0,g.reset(),h.reset()},e=()=>{var e=Math.round;let f=![h.currPos.x].includes(NaN);if(f&&h.currPos.x===h.lastPos.x)return void b();h.lastPos.x=h.currPos.x;const i=h.lastMoveEvent;let j=g.tooltip||i&&i.target.querySelector(d.base);if(!j)return void b();g.tooltip||=j,g.arrow||=j.querySelector(d.arrow),g.wrap||=i.target.closest(d.wrap)||i.target.parentNode;let k=h.currPos.x,l=7,m=16;"focus"===i.type?k=i.target.getBoundingClientRect().left+i.target.offsetWidth/2:isNaN(k)&&(k=g.tooltip.dataset.lastPagex||i.target.getBoundingClientRect().left),g.tooltip.dataset.lastPagex=k;let n=k-g.wrap.getBoundingClientRect().left-m/2,o=g.tooltip.querySelector(d.textWrap),p=o.offsetWidth,q=g.tooltip.dataset.adjust,r=p-m-l;if(q=parseInt(q,10),q=isNaN(q)?0:e(q),q&&(n-=q,r+q>g.wrap.offsetWidth)){let a=o.querySelector(d.text),b=a.offsetWidth;r=b-m-l}g.arrow.style.left=n<=l?`${l}px`:n>=r?`${r}px`:`${n}px`,f?b():a&&c()};return{_requestArrowAnimation:b,_cancelArrowAnimation:c,_requestArrowAnimationOnce:()=>{e(),c()}}})(),l=a=>({lock:()=>{if(a.dataset.preventedClick=1,a instanceof HTMLLabelElement&&a.htmlFor){let b=document.getElementById(a.htmlFor);b&&(b.dataset.preventedClick=1)}a instanceof HTMLInputElement&&a.id&&document.querySelectorAll(`label[for="${a.id}"]`).forEach(a=>{a.dataset.preventedClick=1})},release:()=>{if(a instanceof Element){if(delete a.dataset.preventedClick,a instanceof HTMLLabelElement&&a.htmlFor){let b=document.getElementById(a.htmlFor);b&&delete b.dataset.preventedClick}a instanceof HTMLInputElement&&a.id&&document.querySelectorAll(`label[for="${a.id}"]`).forEach(a=>{delete a.dataset.preventedClick})}},isLocked:()=>a instanceof Element&&!!+a.dataset.preventedClick}),m=()=>{let a=!1,b=!1;try{(()=>{const c={get passive(){return a=!0,!1},get capture(){return b=!0,!1}};window.addEventListener("tsf-tt-test-passive",null,c),window.removeEventListener("tsf-tt-test-passive",null,c)})()}catch(c){a=!1,b=!1}const g=async a=>{if(a.target.dataset.hasTooltip)return;let b=!1;switch(a.type){case"mouseenter":break;case"pointerdown":case"touchstart":b=!0;break;case"focus":default:}b||l(a.target).lock(),j();(await e.pointerEnter(a))&&(e.pointerMove(a),b?k():i(),f(a.target).set())},h=a=>{l(a.target).isLocked()||(a.preventDefault(),setTimeout(()=>l(a.target).lock()))};let m=!1;const n=a=>{m||(m=!0,a.target.classList.contains(c.item)&&g(a),a.stopPropagation(),m=!1)};let o;const q=!(a&&b)||{capture:!0,passive:!0},r=()=>{clearTimeout(o),o=setTimeout(()=>{let a=document.querySelectorAll(d.wrap),c="mouseenter pointerdown touchstart focus".split(" ");for(let d=0;d<a.length;d++)c.forEach(b=>{a[d].addEventListener(b,n,q)}),a[d].addEventListener("click",h,!!b&&{capture:!1})},25)};r(),window.addEventListener("tsf-tooltip-reset",r),p("#wpwrap")},n=(a,b,e)=>{var f=Math.min;b.dataset.hasTooltip=1;let g=document.createElement("div");g.classList.add(c.base),g.insertAdjacentHTML("afterbegin",`<span class=${c.textWrap}><span class=${c.text}>${e}</span></span><div class=${c.arrow} style=will-change:left></div>`),b.prepend(g);let h=b.closest(d.boundary)||document.body,i=h.getBoundingClientRect(),j=i.top-(h.scrollTop||0),k=h.offsetWidth,l=250,m=12,n=b.closest(d.wrap)||b.parentElement,o=n.getBoundingClientRect(),p=g.querySelector(d.textWrap),q=p.getBoundingClientRect(),r=o.width;q.width>l&&r<l&&150<r&&(p.style.flexBasis=`${r}px`),p.offsetWidth>k-m/2?(p.style.flexBasis=`${f(l,k-m)}px`,m/=2):q.width>l&&(p.style.flexBasis=`${l}px`);let s=i.left-(h.scrollLeft||0),t=s+k,u=p.offsetWidth,v=q.left,w=v+u,x=0;if(v<s)x=s-v+m;else if(w>t)x=t-v-u-m;else if(42>r)x=-r/2-m;else if(r>u){let b=a&&a.pageX||NaN;x=a&&"focus"===a.type?r/2-u/2:isNaN(b)?-m:b-o.left-u/2;let c=-m,d=r-u+m;x<c&&(x=c),x>d&&(x=d)}if(x+v<s+m){let a=x+v-(s+m/2);x-=a}if(x+w>t+m){let a=x+w-(t+m/2);x-=a}if(x+v<s&&(x=0),!a){let a=parseInt(p.style.flexBasis,10);x<-a&&(x=-a)}g.style.left=`${x}px`,g.dataset.adjust=x;let y=b.offsetHeight+8,z=g.getBoundingClientRect().top-y;return j>z?(g.classList.add("tsf-tooltip-down"),g.style.top=`${y}px`):g.style.bottom=`${y}px`,!0},o=(b,c,e)=>{c instanceof a&&(c=c.get(0));for(const a of document.querySelectorAll(d.base))q(a),f(a).unset();return!!e.length&&n(b,c,e)},p=a=>{a instanceof Element&&a.classList.add(c.boundary)},q=b=>{b instanceof a&&(b=b.get(0)),b instanceof HTMLElement&&(delete b.dataset.hasTooltip,l(b).release());const c=r(b);null===c||void 0===c?void 0:c.parentNode.removeChild(c)},r=b=>{var e,f;return b instanceof a&&(b=b.get(0)),null!==(e=b)&&void 0!==e&&e.classList.contains(c.base)?b:null===(f=b)||void 0===f?void 0:f.querySelector(d.base)};return Object.assign({load:()=>{document.body.addEventListener("tsf-ready",m)}},{doTooltip:o,removeTooltip:q,getTooltip:r,addBoundary:p,triggerReset:()=>{window.dispatchEvent(new CustomEvent("tsf-tooltip-reset"))},triggerUpdate:a=>{if(a&&a instanceof Element||(a=document.querySelectorAll(d.item)),!a)return;const b=new CustomEvent("tsf-tooltip-update");a instanceof Element?a.dispatchEvent(b):a instanceof Nodelist&&a.forEach(a=>a.dispatchEvent(b))}})}(jQuery),window.tsfTT.load();
